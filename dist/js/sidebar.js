function getImageUrlFromBaidu(t){var e={pn:0,rn:1,tag1:["明星","美女","壁纸","搞笑","儿童文艺","咨询","动漫","宠物","摄影","设计"][t],ie:"utf8"};$.ajax({type:"GET",url:"http://image.baidu.com/channel/listjson",data:e,crossDomain:!0,jsonp:!0,jsonpCallback:function(){alert(1)},success:function(t){alert(t)}})}function wrapByA(t,e){return'<a href="'+("没有了"===t?"javascript:void(0)":"./"+t+".html")+'">'+(e||t)+"</a>"}function wrapByTag(t,e){return"a"===e.toLowerCase()?wrapByA(t):"<"+e+">"+t+"</"+e+">"}function filterName(t){return t.replace(/[\s$@#&;()/.'"]/g,"")}function getViewport(t){return{width:(t=t||window).innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:t.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function scrollTo(t,e){"返回顶部"!==t&&t?e?e.animate({scrollTop:$("#"+t).offset().top-100},500):$("html, body").animate({scrollTop:$("#"+t).offset().top},500):$("html, body").animate({scrollTop:0},500)}function getSuffix(t){return t.substring(t.lastIndexOf(".")+1)}function $Notify(){getImageUrlFromBaidu(0),this.win=document.createElement("div"),this.win.setAttribute("class","notify"),this.win.style.opacity="0",this.win.style.zIndex="3",document.body.appendChild(this.win),this.timeout=null}hljs&&hljs.initHighlightingOnLoad?hljs.initHighlightingOnLoad():$(function(){hljs&&hljs.initHighlightingOnLoad()}),$Notify.prototype.info=function(t,e){e=e||2e3;var i=this.win;i.innerText=t,i.style.opacity="1",i.style.transition="all 1s",this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){i.style.opacity="0"},e)},$(function(){var t=document.createElement("meta"),e=document.createElement("link"),i=document.createElement("script");i.src="/static/js/auto-push-to-baidu.js",e.setAttribute("rel","shortcut icon"),e.setAttribute("href","../images/web-note.ico"),e.setAttribute("type","image/vnd.microsoft.icon"),t.setAttribute("name","viewport"),t.setAttribute("content","width=device-width, initial-scale=1"),document.head.appendChild(t),document.head.appendChild(e),document.head.appendChild(i);for(var n=window.location.href,a=decodeURI(n.substring(n.lastIndexOf("/")+1,n.lastIndexOf("."))),s=$("#sidebar"),o=$("#hideCatalog"),l=$("#showCatalog"),r=$("#catalog"),c=$("#title"),d=$("#container"),u=["HTML","CSS","Javascript","NodeJS","VueJS","移动Web","工具","协议","安全","测试","后端","其他"],p=[["DOM","meta标签","href和src","link","script","HTML语义化","HTML5","canvas","svg"],["选择器","盒式模型","元素种类","元素定位","元素居中","伪类伪元素","格式化上下文","CSS Hack","CSS3","CSS怪异现象","颜色和长度","百分比"],["数据类型","数组字符串与对象","循环","作用域链","原型链","闭包","事件","复制粘贴","RegExp","Class","JSONP","this","jquery","promise","Generator","async","Typescript"],["commonJS","package.json","path","file system","process","webpack","plugins","loader"],["安装","实例","模版","组件","mixins","router","vuex"],["响应式布局","bootstrap","viewport"],["抓包工具","chrome devtools","git","sublime 插件"],["HTTP"],["CSRF","XSS","同源策略"],["karma","Vue Test Utils"],["Thinkphp5.1","htaccess"],["路径匹配","浏览器渲染","设计策略","cookie","头疼的兼容","命名规范","字符编码","算法规范","bat"]],h="",m=0;m<u.length;m++){h+=wrapByTag('<img src="../images/slide_down.png">'+u[m],"h3");for(var f=0,g="";f<p[m].length;f++)g+="<div"+(p[m][f]===a?' id="currentItem" ':"")+">"+wrapByA(p[m][f])+"</div>";h+=wrapByTag(g,"section")}s.append(h),r.append('<section id="searchContainer"><input id="searchInput" type="text" placeholder="搜索文章"/><section id="searchResult"></section></section>');var y=$("#searchInput"),v=$("#searchResult"),b=0;v.css("display","none"),y.keyup(function(t){var n=y.val(),a="";if(n=n||" ",p.forEach(function(t,i){t.forEach(function(t){var e=new RegExp(n,"i");e.test(t)&&(a+=wrapByTag(wrapByA(t,t.replace(e,'<span class="filteredHightLight">'+t.match(e)+"</span>")+' <span class="filteredCategory">('+u[i]+")</span>"),"li"))})}),""===n.trim()||""===a.trim()?v.css("display","none"):(t.keyCode<37||40<t.keyCode)&&13!==t.keyCode&&(v.css("display","block"),v.html(a)),""!==a.trim()){var e=$("#searchResult li");switch(t.keyCode){case 13:var i=e.toArray().findIndex(function(t){return"rgb(239, 239, 239)"===t.style.backgroundColor});-1===i?e.eq(0).click():e.eq(i).click();break;case 37:break;case 38:0<b&&b--,b<e.length&&e.eq(b).css("background-color",""),0<b&&e.eq(b-1).css("background-color","#efefef");break;case 39:break;case 40:0<b&&e.eq(b-1).css("background-color",""),b<e.length&&(e.eq(b).css("background-color","#efefef"),b++);break;default:b=0}}}),d.click(function(){v.css("display","none")});var w=!0,k="../images/slide_down.png",x="../images/slide_down_dark.png",T=$("#sidebar h3");T.each(function(){var t=$(this),e=t.children();t.click(function(){e.attr("src")===k||e.attr("src")===x?e.attr("src",w?"../images/slide_up.png":"../images/slide_up_dark.png"):e.attr("src",w?k:x),t.next().slideToggle("slow")})});var C=getViewport().width/3;c.after('<svg title="点击切换样式" style="display: block; margin: auto; width:'+C+'px" xmlns="http://www.w3.org/2000/svg" version="1.1" height="1px"><path id="line" d="M 0 0 L '+C+' 0" style="stroke: #000; stroke-dasharray: '+C+"; stroke-dashoffset: "+C+'; fill: none;"/></svg>');var I=$("#line");c.mouseover(function(){c.animate({"padding-top":"1%","padding-bottom":"1%"},"fast"),I.animate({"stroke-dashoffset":0},"fast")}),c.mouseout(function(){c.animate({"padding-top":"0","padding-bottom":"0"},"fast"),I.animate({"stroke-dashoffset":C},"fast")});var A=new $Notify,E=document.createElement("textarea");E.style.display="none",document.body.appendChild(E),$(".hljs").each(function(t,e){var i=document.createElement("div"),n=document.createElement("div");i.setAttribute("class","codeType"),n.setAttribute("class","codeCopy"),n.setAttribute("title","点击复制代码");var a=e.getAttribute("class").split(" ")[0];i.innerText=a,n.style.right=8*i.innerText.length+(10-i.innerText.length)+"px",n.onclick=function(){DataTransfer&&window.clipboardData instanceof DataTransfer?window.clipboardData.setData("text",e.innerText.replace(a,"")):(E.style.display="inline-block",E.value=e.innerText.substring(1,e.innerText.lastIndexOf("\n")),E.select(),document.execCommand("copy"),E.style.display="none"),A.info("已经复制到剪切板")},e.appendChild(i),e.appendChild(n)});var L=$("link").eq(2),H=$("link").eq(1),M=$("#sidebar h3 img"),S=$("#hideCatalog");function q(t,e,i,n){var a,s,o=(e-t)/i,l=1e3*n/i;t<e?(a=4,s=1/i):(a=5,s=-1/i);for(var r=t,c=0;r!==e;r+=o,a+=s,c+=l)!function(){var t=r+"%",e="0 "+a+"%";setTimeout(function(){d.css({width:t,margin:e})},c)}();setTimeout(function(){a+=s,d.css({width:e+"%",margin:"0 "+a+"%"})},1e3*n)}c.click(function(){L.attr("href",w?"../css/dark.css":"../css/bright.css"),H.attr("href",w?"../css/styles/agate.css":"../css/styles/default.css"),I.css("stroke",w?"#fff":"#000"),S.attr("src",w?"../images/catalog_dark.png":"../images/catalog.png"),M.each(function(t,e){var i=e.src;e.src=w?i.substring(0,i.lastIndexOf("."))+"_dark.png":i.substring(0,i.lastIndexOf("_"))+".png"}),$("a").each(function(t,e){e.href=w?e.href+"?theme=dark":e.href.replace("?theme=dark","")}),$(".codeCopy").toggleClass("codeDark"),w=!w}),0<=n.indexOf("?theme=dark")&&c.click(),o.attr("title","点击隐藏侧栏"),o.click(function(t){s.animate({width:"0",padding:"0"},"slow",function(){s.css("display","none"),l.css("display","block")}),q(65,90,25,1),t.stopPropagation(),window.event.cancelBubble=!0}),l.attr("title","点击显示侧栏"),l.click(function(){var t,e=getViewport().width;e<400?(e="100%",t="0"):(e="25%",t="1%"),s.css("display","inline-block"),l.css("display","none"),s.animate({width:e,padding:t},"slow"),q(90,65,20,.5)}),$("a").not(".self").attr("target","_blank");var B=$("#container>section>h2"),O="",j="";for(m=1;m<=4;m++)j+='<div class="block'+m+'"></div>';j='<div id="subTitleToggle">'+j+"</div>";var N=decodeURI(n.substring(n.indexOf("#")+1));N=N.replace(/\?theme=(dark)|(bright)/,""),B.each(function(){var t=filterName(this.innerHTML);$(this).wrap('<a style="height: 50%; margin: 0; padding: 0; text-decoration: none; color: #000;" id="'+t+'" href="#'+t+'"></a>'),$(this).click(function(){scrollTo(t)}),this.innerHTML===N&&$(this).click(),O+='<div class="subTitleItem">'+this.innerHTML+"</div>"}),O='<div id="subTitleNav">'+O+'<div class="subTitleItem">返回顶部</div></div>',$("body").append(O+j);var R=$(".subTitleItem"),D=$("#subTitleToggle"),_=$("#subTitleToggle div");R.each(function(){var e=filterName(this.innerHTML);$(this).click(function(t){scrollTo(e)})});var W=!1,V=!1;function P(){W=!0;for(var e=0,i=0;i<R.length;i++,e+=50)!function(){var t=i;setTimeout(function(){R.eq(t).fadeOut(100)},e)}();for(i=0;i<_.length;i++,e+=100)!function(){var t=i;setTimeout(function(){_.eq(t).show("fast")},e)}();setTimeout(function(){W=!1},50*R.length+100*_.length),V=!1}D.attr("title","点击显示子标题导航"),D.click(function(t){var e=0;for(m=_.length;0<=m;m--,e+=100)!function(){var t=m;setTimeout(function(){_.eq(t).hide("fast")},e)}();for(m=R.length-1;0<=m;m--,e+=50)!function(){var t=m;setTimeout(function(){W||R.eq(t).fadeIn(100)},e)}();V=!0,t.stopPropagation(),window.event.cancelBubble=!0}),document.body.onclick=P;var U=!0;$(window).scroll(function(){var t=$(this).scrollTop(),e=$(document).height();t+$(this).height()===e?(D.stop().hide("slow"),U=!0):U&&(D.stop().show("slow"),U=!1),V&&P()});var J="没有了",F="没有了",X=0;if("index"===a)F=p[0][0];else{var z=[];p.forEach(function(t){t.forEach(function(t){z.push(t)})}),0!==(X=z.indexOf(a))&&(J=z[X-1]),X!==z.length-1&&(F=z[X+1])}function G(t){var e=window.getComputedStyle?getComputedStyle(t).width:t.currentStyle.width;return 0===(e=Number.parseInt(e))?t.clientWidth||t.scrollWidth||t.offsetWidth||500:e}function Y(t){return t?t.naturaWidth?.2*t.naturaWidth:.2*G(t):50}function K(){pt.style.opacity=ht.style.opacity=0,et&&clearTimeout(et),et=setTimeout(function(){pt.style.display=ht.style.display="none"},1e3)}function Q(t,e){var i=st.lastChild;if(i instanceof HTMLImageElement&&t){var n=getViewport(),a=n.height/2-t.clientY,s=n.width/2-t.clientX;a=e?a/2:Math.sqrt(a),s=e?s/2:Math.sqrt(s);var o=Number.parseInt(i.style.paddingLeft),l=Number.parseInt(i.style.paddingRight),r=Number.parseInt(i.style.paddingTop),c=Number.parseInt(i.style.paddingBottom);e?o+=s-l:o-=s-l,e?l-=s:l+=s,e?c+=a-r:c-=a-r,e?r+=a:r-=a,i.style.paddingLeft=Math.max(o,0)+"px",i.style.paddingRight=Math.max(l,0)+"px",i.style.paddingTop=Math.max(r,0)+"px",i.style.paddingBottom=Math.max(c,0)+"px"}}function Z(){var t=st.lastChild,e=G(t);t.style.width=e-Y(t)+"px"}function tt(t){if(st.lastChild instanceof HTMLImageElement)for(var e=st.lastChild,i=$("#container figure>img").toArray(),n=0;n<i.length;n++)if(i[n].src===e.src){t?0<=n-1?e.src=i[n-1].src:A.info("已经是第一张了"):n+1<i.length?e.src=i[n+1].src:A.info("已经是最后一张了");break}}J=wrapByA(J),F=wrapByA(F),$(".refer").after('<div id="footer" ><div class="prePage">上一篇：'+J+'</div><div class="nextPage">下一篇：'+F+"</div></div>"),p.forEach(function(t,e){-1===t.indexOf(a)&&T.eq(e).click()}),"index"===a||/.+\/html\/$/.test(a)||setTimeout(function(){scrollTo("currentItem",s);var t=$("#currentItem > a");t.animate({"font-size":"1.25rem","font-weight":900},1e3,function(){t.animate({"font-size":"1rem","font-weight":"bold"},1e3)})},500);var et=null,it=null,nt=null,at=document.createElement("div"),st=document.createElement("div"),ot=document.createElement("div"),lt=document.createElement("div"),rt=document.createElement("div"),ct=document.createElement("div"),dt=document.createElement("div"),ut=null;dt.innerText="↓",dt.setAttribute("title","下载"),dt.setAttribute("class","closeImg"),dt.style.right="200px",dt.onclick=function(){if(st.lastChild instanceof HTMLImageElement){var t=st.lastChild.src,e=document.createElement("a");e.setAttribute("download",t),e.setAttribute("href",t),e.setAttribute("target","_blank"),e.click()}},rt.innerText="-",rt.setAttribute("title","缩小"),rt.setAttribute("class","closeImg"),rt.style.right="150px",rt.onmousedown=function(){Z(),it&&clearInterval(it),it=setInterval(Z,200)},rt.onmouseup=function(){it&&clearInterval(it)},ct.innerText="+",ct.setAttribute("title","放大"),ct.setAttribute("class","closeImg"),ct.style.right="100px",ct.onmousedown=function(){gt(),nt&&clearInterval(nt),nt=setInterval(gt,200)},ct.onmouseup=function(){nt&&clearInterval(nt)},ot.innerText="x",ot.setAttribute("title","关闭"),ot.setAttribute("class","closeImg"),ot.onclick=function(){st.lastChild instanceof HTMLImageElement&&(st.removeChild(st.lastChild),st.style.display="none",at.style.display="none",mt.style.display="none",ft.style.display="none",K())},lt.innerText="r",lt.setAttribute("class","closeImg"),lt.style.right="50px",lt.setAttribute("title","复原"),lt.onclick=function(){st.lastChild instanceof HTMLImageElement&&(st.lastChild.style.padding="0px",ut&&(st.lastChild.style.width=ut+"px"))},at.setAttribute("class","mask"),st.appendChild(dt),st.appendChild(rt),st.appendChild(ct),st.appendChild(lt),st.appendChild(ot),st.setAttribute("class","imgContainer"),st.onclick=K,window.addEventListener("scroll",K),document.body.appendChild(at),document.body.appendChild(st);var pt=document.createElement("div"),ht=document.createElement("div"),mt=document.createElement("div"),ft=document.createElement("div");function gt(){var t=st.lastChild,e=G(t);t.style.width=e+Y(t)+"px"}pt.innerText="-",ht.innerText="+",pt.style.opacity=ht.style.opacity=0,pt.style.borderRadius="5px 0 0 5px",ht.style.borderRadius="0 5px 5px 0",pt.style.marginLeft="-1px",ht.style.marginRight="-1px",pt.setAttribute("class","scaleDiv"),ht.setAttribute("class","scaleDiv"),pt.setAttribute("title","缩小图像"),ht.setAttribute("title","放大图像"),mt.innerText="←",ft.innerText="→",mt.setAttribute("title","上一张"),ft.setAttribute("title","下一张"),mt.setAttribute("class","changeImg"),ft.setAttribute("class","changeImg"),ft.style.right="0",mt.style.display="none",ft.style.display="none",mt.onclick=function(){tt(!0)},ft.onclick=function(){tt(!1)},pt.onclick=function(t){Z(),Q(t,!1)},ht.onclick=function(t){gt(),Q(t,!0)},document.body.appendChild(pt),document.body.appendChild(ht),document.body.appendChild(mt),document.body.appendChild(ft),$("#container figure>img").each(function(){var e=$(this);e.attr("title","点击放大"),e.click(function(){var t=document.createElement("img");t.setAttribute("class","tmpImg"),t.setAttribute("title","点击右键打开缩放菜单"),t.setAttribute("src",e.attr("src")),st.style.display=at.style.display="block",t.oncontextmenu=function(t){return et&&clearTimeout(et),pt.style.display=ht.style.display="block",pt.style.opacity=ht.style.opacity=1,ht.style.left=t.pageX+"px",pt.style.left=t.pageX-50+"px",pt.style.top=ht.style.top=t.pageY+"px",t.preventDefault(),t.returnValue=!1},mt.style.display="",ft.style.display="",st.appendChild(t),setTimeout(function(){ut=G(t),t.style.width=ut+"px"},0),t.style.padding="0px"})});var yt=$("#catalogFrame img");yt.length&&yt.click(function(){var t=$(this).next().next();void 0!==t&&"DIV"===t.prop("tagName").toUpperCase()&&t.toggle(500)});var vt=$("table");vt.length&&(vt.attr({border:1,cellpadding:1,cellspacing:0}),vt.each(function(){$(this).parent().css("overflow","auto")}))});