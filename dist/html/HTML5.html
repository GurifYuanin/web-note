<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>HTML5</title>
	<link rel="stylesheet" href="../css/normalize.css">
	<link rel="stylesheet" href="../css/styles/default.css">
	<link rel="stylesheet" href="../css/bright.css">
	<script src="../js/jquery-3.2.1-compressed.js"></script>
	<script src="../js/highlight.pack.js"></script>
	<script src="../js/sidebar.js"></script>
</head>
<body>
	<aside id="sidebar">
		<section id="catalog">
			<img id="hideCatalog" src="../images/catalog.png" alt="加载失败">
			目录
		</section>
	</aside>
	<div id="showCatalog">
		<img src="../images/arrow.png">
	</div>
	<article id="container">
		<hgroup>
			<h1 id="title">HTML5</h1>
		</hgroup>
		<section>
			<h2>定义</h2>
			<p>
				HTML5 是 HTML 最新的修订版本，2014年10月由万维网联盟（W3C）完成标准制定。<sup>[1]</sup><br>
				<ul>
					<li>简而言之， HTML5 是下一代 HTML 标准</li>
					<li>最新版本的 Safari、Chrome、Firefox 以及 Opera 支持某些 HTML5 特性。Internet Explorer 9 将支持某些 HTML5 特性。</li>
				</ul>
				<pre><code class="html">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;
				</code></pre>
				<h3>模式</h3>
				<p>
					<span class="definition">&lt;!DOCTYPE html&gt;</span> 告知浏览器的解析器，用什么文档类型 规范来解析这个文档。
					<ul>
						<li>混杂模式：不写 &lt;!DOCTYPE&gt;，页面以宽松的向后兼容的方式显示，用于兼容非标准代码</li>
						<li>标准模式：使用 &lt;!DOCTYPE&gt;，页面要求标签必须闭合，不能使用已经废弃的标签等等</li>
					</ul>
					<pre><code class="html">
&lt;!-- html5 --&gt;
&lt;!DOCTYPE html&gt;
&lt;!-- html4.01 --&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;!-- xhtml1.0 --&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
					</code></pre>
				</p>
				<h3>charset</h3>
				<p>
					<span class="definition">&lt;meta charset="UTF-8"&gt;</span> ( HTML5 中)等价于 <span class="definition">&lt;meta http-equiv="charset" content="utf-8"&gt;</span>。
				</p>
			</p>
		</section>
		<section>
			<h2>canvas</h2>
			<p>
				canvas 是 HTML5 新增的标签，使用该标签和脚本可以绘制线条、形状、渐变、文字等。
				<pre><code class="html">
&lt;!-- 在 HTML 中 width 和 height 是画布大小 --&gt;
&lt;canvas id="canvas" width="100px" height="100px"&gt;&lt;/canvas&gt;
				</code></pre>
				&lt;canvas&gt; 标签只是个容器，内容的绘制需要借助 javascript 来控制。
				<pre><code class="javascript">
var canvas = document.getElementById('canvas'); // 获取元素
var context = canvas.getContext('2d'); // 获取 context
// javascript 中 width 和 height 是图像大小
context.height = '100px';
context.width = '100px';
// 使用 context 进行绘图
// ...
				</code></pre>
				绘制方法参见<a href="./canvas.html">此处</a>。
			</p>
		</section>
		<section>
			<h2>内联svg</h2>
				<p>
					svg (Scalable Vector Graphics/可伸缩矢量图形) 是一种使用 XML 描述 2D 图形的语言。<br>
					在 HTML5 中，可以直接将 svg 嵌入到页面中，详细绘制方法参见<a href="./svg.html"> 此处 </a>。
					<pre><code class="html">
&lt;svg height="100" xmlns="http://www.w3.org/2000/svg" version="1.1"&gt;
   &lt;circle cx="50" cy="50" r="50" stroke="black" stroke-width="1" fill="green" /&gt;
&lt;/svg&gt;
					</code></pre>
					<div class="show">
						<svg height="102" xmlns="http://www.w3.org/2000/svg" version="1.1">
						   <circle cx="51" cy="51" r="50" stroke="black" stroke-width="1" fill="green" />
						</svg>
					</div>
				</p>
		</section>
		<section>
			<h2>MathML</h2>
			<p>
				MathML(Mathematical Markup Language/数学标志语言)是一种基于XML的标准，用来描述数学符号和公式。<br>
				HTML5 可以在文档中使用  MathML 元素，目前仅有 Firefox、Safari 支持 MathML。
				<pre><code class="html">
&lt;math xmlns="http://www.w3.org/1998/Math/MathML"&gt;
	&lt;mrow&gt;
		&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;
	&lt;/mrow&gt;
&lt;/math&gt;
				</code></pre>
				<div class="show">
					<math xmlns="http://www.w3.org/1998/Math/MathML">
						<mrow>
							<msup><mi>x</mi><mn>2</mn></msup>
						</mrow>
					</math>
				</div>
			</p>
		</section>
		<section>
			<h2>video & audio</h2>
			<p>
				video 和 audio 是 HTML5 新增的标签，用于向网页插入视频和音频。
				<pre><code class="html">
&lt;!-- 插入视频 --&gt;
&lt;video width="400" height="400" controls&gt;
	&lt;source src="video.mp4" type="video/mp4"&gt;
&lt;/video&gt;
&lt;!-- 插入音频 --&gt;
&lt;audio controls&gt;
	&lt;source src="audio.mp3" type="audio/mpeg"&gt;
&lt;/audio&gt;
				</code></pre>
				<div class="show">
					<figure>
						<video controls>
							<source src="../video/brids.webm" type="video/webm">
						</video>
						<figcaption>brids.webm</figcaption>
					</figure>
					<figure>
						<audio controls>
							<source src="../video/gymnastics.mp3" type="audio/mpeg">
						</audio>
						<figcaption>gymnastics.mp3</figcaption>
					</figure>
				</div>
				当前对于 video 浏览器仅支持三种视频格式：<span class="definition"> mp4、webm、ogg </span>
				<ul>
					<li>mp4：type="video/mp4，且必须是 H264 编码</li>
					<li>webm：type="video/webm</li>
					<li>ogg：type="video/ogg</li>
				</ul>
				其中 IE 和 Safari 不支持<span class="definition"> webm 和 ogg</span>，只支持<span class="definition"> ogg </span>。
			</p>
		</section>
		<section>
			<h2>新表单</h2>
			<p>
				<ul>
					<li>
						type="color"：<input type="color">
					</li>
					<li>
						type="date"：<input type="date">
					</li>
					<li>
						type="datetime"：<input type="datetime">
					</li>
					<li>
						type="email"：<input type="email">
					</li>
					<li>
						type="month"：<input type="month">
					</li>
					<li>
						type="number"：<input type="number">
					</li>
					<li>
						type="range"：<input type="range">
					</li>
					<li>
						type="search"：<input type="search">
					</li>
					<li>
						type="tel"：<input type="tel">
					</li>
					<li>
						type="time"：<input type="time">
					</li>
					<li>
						type="url"：<input type="url">
					</li>
					<li>
						type="week"：<input type="week">
					</li>
				</ul>
			</p>
		</section>
		<section>
			<h2>localStorage & sessionStorage</h2>
			<p>
				localStorage 和 sessionStorage 都是保存在客户端的数据，以 <span class="definition">键值对</span> 的方式存储。
				<pre><code class="javascript">
if (typeof(Storage) !== 'undefined') {
// 浏览器支持 localStorage 和 sessionStorage 的情况
// localStorage 和 sessionStorage 的 API 完全相同
	localStorage.setItem('key', 'value'); // 设置键值对
	var item = localStorage.getItem('key'); // 通过key读取值
	var key = localStorage.key(index); // 通过索引读取key
	localStorage.removeItem('key'); // 通过key删除键值对
	localStorage.clear(); // 删除所有键值对
} else {
	// 浏览器不支持 localStorage 和 sessionStorage 的情况
}
				</code></pre>
				与 cookie 相比较，localStorage 和 sessionStorage 有以下特点：
				<ul>
					<li>localStorage 永远存储在客户端（除非主动删除），sessionStrorage 在浏览器关闭后自动删除</li>
					<li>单个键值的存储最大为 5 ~ 10M （因不同浏览器而差异）</li>
					<li>同样受同源策略限制</li>
				</ul>
			</p>
		</section>
		<section>
			<h2>Application Cache</h2>
			<p>
				应用缓存，即对页面资源进行离线缓存.
				<pre><code class="html">
&lt;!-- 在 html 标签上使用 manifest 属性 --&gt;
&lt;html lang="en" manifest="mycache.appcache"&gt;
...
&lt;/html&gt;
				</code></pre>
				mycache.appcache 是在服务器的 manifest 文件，用于指定页面上哪些资源需要缓存，哪些不需要缓存。
				<pre><code class="appcache">
CACHE MANIFEST
# 此处写需要被缓存的资源

NETWORK:
# 此处写不需要被缓存的资源

FALLBACK:
# 此处写获取不到资源时的替补资源
资源 替补资源
				</code></pre>
			</p>
		</section>
		<section>
			<h2>Web Worker</h2>
			<p>
				使用 Web Worker 来后台执行 javascript 文件，同时可以与脚本进行信息的交换。
				<pre><code class="javascript">
if (typeof(Worker) !== 'undefined') {
	// 浏览器支持 Web Worker
	var worker = new Worker('my-script.js'); // 新建一个 Worker 对象
	worker.onmessage = function(event) { // 监听 my-script.js 传送过来的消息
		console.log(event.data);
	}
	worker.onerror = function(event) { // 监听出错，例如执行了不同源的脚本
		console.log(event);
}
} else {
	// 浏览器不支持 Web Worker
}
				</code></pre>
			</p>
			my-script.js 文件：
			<pre><code class="javascript">
postMessage('hello'); // 传送消息
			</code></pre>
			<div class="tip">
				在 chrome 浏览器上，由于安全机制，无法在本地使用 web worker，需要使用服务器运行。
			</div>
			<br>
		</section>
		<section>
			<h2>Web Socket</h2>
			<p>
				WebSocket是HTML5开始提供的一种在单个 TCP 连接上进行全双工通讯的协议。<br>
				<pre><code class="javascript">
if ('WebSocket' in window) {
	var url = ''; // 进行通信的URL
	var message = ''; // 发送的数据
	var receive = ''; // 接收的数据
	var socket = new WebSocket(url); // 创建 WebSocket 对象(浏览器马上尝试连接)
	// 成功建立连接时触发
	socket.onopen = function() {
		socket.send(message);
	}
	// 接受到数据时触发
	socket.onmessage = function(event) {
		receive = event.data;
	}
	// 关闭连接时触发
	socket.onclose = function(event) {
		if (event.wasClean) {
			// 连接已经关闭
		}
	}
	// 连接出错时触发
	socket.onerror = function(event) {
		console.log('服务器返回的状态码：' + event.code);
		console.log('服务器返回的信息：' + event.reason);
	}
	socket.send(message);
	socket.close();
}
				</code></pre>
			</p>
		</section>
		<section>
			<h2>拖放</h2>
			<p>
				HTML 新增了几个拖放相关的事件，在 HTML5 中实现拖放操作：
				<div>
					<div id="source" style="height:50px; width: 50px; border: 1px solid #000;">
						<!-- draggable = "true" 或不设置表示允许拖动 -->
						<img id="objection" src="../images/putin.jpg" alt="加载失败" width="50px" draggable="true">
					</div>
					<div id="destination" style="height: 50px; width: 50px; border: 1px solid #000;">
					</div>
					<script>
						var objection = document.getElementById('objection');
						var source = document.getElementById('source');
						var destination = document.getElementById('destination');
						// 被拖动对象刚开始被拖动时触发的事件
						objection.ondragstart = function(event) {
							event.dataTransfer.setData('text', event.target.id); // 设置数据(text/url/mime)
						};
						// 被拖动对象正在被拖动时触发的事件
						// 该事件会持续触发
						objection.ondrag = function(event) {

						};
						// 被拖动对象刚拖动结束触发的事件
						objection.ondragend = function(event) {

						};
						// 对象刚拖进目标时触发的事件
						destination.ondragenter = function(event) {

						};
						// 对象悬浮在目标时触发的事件
						// 该事件会持续触发
						source.ondragover = destination.ondragover = function(event) {
							event.preventDefault(); // 阻止默认事件(无法放置)
						};
						// 对象离开目标时触发的事件
						source.ondragleave = destination.ondragleave = function(event) {

						};
						// 对象放置在目标时触发的事件
						// drop 后 dataTransfer 将被销毁
						source.ondrop = destination.ondrop = function(event) {
							event.preventDefault(); // 阻止默认事件(以链接形式打开)
							var id = event.dataTransfer.getData('text'); // 读取数据
							var element = document.getElementById(id); // 获取被拖动元素
							event.target.appendChild(element); //将被拖动元素添加到目标内
						};
					</script>
				</div>
				<pre><code class="html">
&lt;div id="source" style="height:50px; width: 50px; border: 1px solid #000;"&gt;
	&lt;!-- draggable = "true" 或不设置表示允许拖动 --&gt;
	&lt;img id="objection" src="../images/普京.jpg" alt="加载失败" width="50px" draggable="true"&gt;
&lt;/div&gt;
&lt;div id="destination" style="height: 50px; width: 50px; border: 1px solid #000;"&gt;
&lt;/div&gt;
&lt;script&gt;
	var objection = document.getElementById('objection');
	var source = document.getElementById('source');
	var destination = document.getElementById('destination');
	// 被拖动对象刚开始被拖动时触发的事件
	objection.ondragstart = function(event) {
		event.dataTransfer.setData('text', event.target.id); // 设置数据(text/url/mime)
	};
	// 被拖动对象正在被拖动时触发的事件
	// 该事件会持续触发
	objection.ondrag = function(event) {

	};
	// 被拖动对象刚拖动结束触发的事件
	objection.ondragend = function(event) {

	};
	// 对象刚拖进目标时触发的事件
	destination.ondragenter = function(event) {

	};
	// 对象悬浮在目标时触发的事件
	// 该事件会持续触发
	source.ondragover = destination.ondragover = function(event) {
		event.preventDefault(); // 阻止默认事件(无法放置)
	};
	// 对象离开目标时触发的事件
	source.ondragleave = destination.ondragleave = function(event) {

	};
	// 对象放置在目标时触发的事件
	// drop 后 dataTransfer 将被销毁
	source.ondrop = destination.ondrop = function(event) {
		event.preventDefault(); // 阻止默认事件(以链接形式打开)
		var id = event.dataTransfer.getData('text'); // 读取数据
		var element = document.getElementById(id); // 获取被拖动元素
		event.target.appendChild(element); //将被拖动元素添加到目标内
	};
&lt;/script&gt;
				</code></pre>
			</p>
		</section>
		<section class="refer">
			<h2>参考文献</h2>
			<p>
				<div>[1] 维基百科 HTML5 <a href="https://zh.wikipedia.org/wiki/HTML5">https://zh.wikipedia.org/wiki/HTML5</a></div>
				<div>[2] 菜鸟教程 HTML5 <a href="http://www.runoob.com/html/html5-intro.html">http://www.runoob.com/html/html5-intro.html</a></div>
				<div>[3] 尹萨萨 [标准模式与混杂模式] <a href="https://www.jianshu.com/p/4aa37da38b81">https://www.jianshu.com/p/4aa37da38b81</a></div>
			</p>
		</section>
	</article>
</body>
</html>