<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>TCP</title>
	<link rel="stylesheet" href="../css/normalize.css">
	<link rel="stylesheet" href="../css/styles/agate.css">
	<link rel="stylesheet" href="../css/dark.css">
	<script src="../js/jquery-3.2.1-compressed.js"></script>
	<script src="../js/highlight.pack.js"></script>
	<script src="../js/sidebar.js"></script>
</head>
<body>
	<aside id="sidebar">
		<section id="catalog">
			<img id="hideCatalog" src="../images/catalog.png" alt="加载失败">
			目录
		</section>
	</aside>
	<div id="showCatalog">
		<img src="../images/arrow.png">
	</div>
	<article id="container">
		<hgroup>
			<h1 id="title">TCP</h1>
		</hgroup>
		<section>
			<h2>三次握手</h2>
			<p>
				<div>SYN：同步序列编号（Synchronize Sequence Numbers）。是TCP/IP建立连接时使用的握手信号。<sup>[1]</sup></div>
				<div>ACK (Acknowledgement）：确认字符，在数据通信中，接收站发给发送站的一种传输类控制字符。<sup>[2]</sup></div>
				<ol>
					<li>客户端发送 SYN 报文，向服务器表示"我要跟你进行连接"</li>
					<li>服务器端发送 ACK 报文，回答客户端"收到了请求，同意进行连接"</li>
					<li>客户端发送 SYN 报文，表示"收到了回应"，连接建立</li>
				</ol>
				三个步骤如果有一个没进行则不会建立连接。
			</p>
		</section>
		<section>
			<h2>四次挥手</h2>
			<p>
				TCP 是全双工（A <-> B）、半关闭的，所以关闭连续需要四次挥手，这里称主动发起关闭方为 A ，接收方为 B 。
				<ol>
					<li>A 向 B 发 FIN 报文，表示"我(单方面)没有消息要发给你，所以打算断开连接了"</li>
					<li>B 向 A 发送 ACK 报文，表示"收到了请求，同意你(单方面)断开连接"</li>
					<span class="different">B 继续向 A 发送还没发送完的数据</span>
					<li>B 向 A 发送 FIN 报文，表示"我也没有消息要发给你了，也打算断开连接了"</li>
					<span class="different">B 会等待 A 发送 ACK 报文(第四次挥手)，如果等不到，则认为发送失败，重新发送 FIN 报文</span>
					<li>A 向 B 发送 ACK 报文，表示"那么我们都没有消息需要发送，都断开连接吧"</li>
					<span class="different">A 等待 2 个 MSL，如果这个时间内没有收到 B 的消息，则认为 B 成功收到自己的 ACK ，自己这边也可以断开连接了</span>
				</ol>
			</p>
		</section>
		<section class="refer">
			<h2>参考文献</h2>
			<p>
				<div>[1] 百度百科 SYN <a href="https://baike.baidu.com/item/SYN/8880122?fr=aladdin">https://baike.baidu.com/item/SYN/8880122?fr=aladdin</a></div>
				<div>[2] 百度百科 ACK <a href="https://baike.baidu.com/item/ACK/3692629?fr=aladdin">https://baike.baidu.com/item/ACK/3692629?fr=aladdin</a></div>
			</p>
		</section>
	</article>
</body>
</html>