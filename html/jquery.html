<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>jquery</title>
	<link rel="stylesheet" href="../css/normalize.css">
	<link rel="stylesheet" href="../css/styles/default.css">
	<link rel="stylesheet" href="../css/bright.css">
	<script src="../js/jquery-3.2.1-compressed.js"></script>
	<script src="../js/highlight.pack.js"></script>
	<script src="../js/sidebar.js"></script>
</head>
<body>
	<aside id="sidebar">
		<section id="catalog">
			<img id="hideCatalog" src="../images/catalog.png" alt="加载失败">
			目录
		</section>
	</aside>
	<div id="showCatalog">
		<img src="../images/arrow.png">
	</div>
	<article id="container">
		<hgroup>
			<h1 id="title">jquery</h1>
		</hgroup>
		<section>
			<h2>ajax</h2>
			<p>
				<h3>定义</h3>
				<p>
					Ajax（Asynchronous JavaScript and XML，异步 Javascript 和 XML）不重载整个网页的情况下，AJAX 通过后台加载数据，并在网页上进行显示。
					<ol>
						<li>通过 XMLHttpRequest 对象向服务器发异步请求</li>
						<li>从服务器获取数据</li>
						<li>使用 javascript 来更新 DOM</li>
					</ol>
				</p>
				<h3>原生</h3>
				<p>
					<table>
						<tr>
							<th>readyState</th>
							<th>解释</th>
						</tr>
						<tr>
							<td>0</td>
							<td>请求未初始化</td>
						</tr>
						<tr>
							<td>1</td><td>服务器连接已建立</td>
						</tr>
						<tr>
							<td>2</td><td>请求已接收</td>
						</tr>
						<tr>
							<td>3</td><td>请求处理中</td>
						</tr>
						<tr>
							<td>4</td><td>请求已完成，且响应已就绪</td>
						</tr>
					</table>
					<pre><code class="javascript">
var xhr;
if (window.XMLHttpRequest) {
    //  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
    xhr = new XMLHttpRequest();
} else {
    // IE6, IE5 浏览器执行代码
    xhr = new ActiveXObject('Microsoft.XMLHTTP');
}
xhr.open('GET', 'www.demo.com', true); // open(method, url, async) async：true -> 异步/ false -> 异步
xhr.onreadystatechange = function() {
	if (xhr.readyState === 4 && xhr.status === 200) {
		// 返回字符串
		console.log(xhr.responseText);
		// 返回 XML
		console.log(xhr.responseXML);
	}
}
xhr.send('message=hello world');
					</code></pre>
				</p>
				<h3>load</h3>
				<p>
					load 用于向 url 发送异步请求，传送 data 数据过去，将返回的内容填充到 element 内，然后执行 callback 函数。
					<pre><code class="javascript">
// 使用方法
element.load(url, data, callback);

// 示例
$('#div').load('www.demo.com', {
	message: 'hello world'
}, function(responseText,statusText,xhr){
	if (statusText === 'success') {
		// 加载成功
		console.log('返回内容：' + responseText);
	} else {
		// 加载失败
		console.log('状态码：' + xhr.status);
		console.log('状态信息：' + xhr.statusText);
	}
});
					</code></pre>
				</p>
				<h3>ajax</h3>
				<p>
					<pre><code class="javascript">
$.ajax({
	type: 'GET', // 请求方法
	url: 'www.demo.com', // 请求 url
	data: { // 请求数据
		message: 'hello world'
	},
	async: true, // 是否异步请求
	contentType: 'application/x-www-form-urlencoded', // 发送到服务器的数据的类型
	dataType: 'text', // 从服务器接收的数据的类型：xml html script json jsonp text
	cache: true, // 是否缓存接收到的页面
	timeout: 1000, // 超时时间
	beforeSend: function(xhr) {},
	success: function(result, status, xhr) {
		console.log(result);
	},
	error: function(xhr, status, error) {},
	complete: function(xhr, status) {}
});
					</code></pre>
				</p>
			</p>
		</section>
		<section class="refer">
			<h2>参考文献</h2>
			<p>
				<div>[1] runoob jQuery - AJAX 简介 <a href="http://www.runoob.com/jquery/jquery-ajax-intro.html">http://www.runoob.com/jquery/jquery-ajax-intro.html</a></div>
				<div>[2] jquery <a href="http://api.jquery.com/jquery.ajax/#jQuery-ajax-settings">http://api.jquery.com/jquery.ajax/#jQuery-ajax-settings</a></div>
			</p>
		</section>
	</article>
</body>
</html>