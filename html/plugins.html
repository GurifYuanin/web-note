<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>插件</title>
	<link rel="stylesheet" href="../css/normalize.css">
	<link rel="stylesheet" href="../css/styles/default.css">
	<link rel="stylesheet" href="../css/sidebar.css">
	<script src="../js/jquery-3.2.1-compressed.js"></script>
	<script src="../js/highlight.pack.js"></script>
	<script src="../js/sidebar.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
	<aside id="sidebar">
		<section id="catalog">
			<img id="hideCatalog" src="../images/catalog.png" alt="加载失败">
			目录
		</section>
	</aside>
	<div id="showCatalog">
		<img src="../images/arrow.png">
	</div>
	<article id="container">
		<hgroup>
			<h1 id="title">plugins</h1>
		</hgroup>
		<section>
			<h2>定义</h2>
			<p>
				webpack 插件是一个具有 apply 属性的 JavaScript 对象。apply 属性会被 webpack compiler 调用，并且 compiler 对象可在整个编译生命周期访问。<sup>[1]</sup>
			</p>
		</section>
		<section>
			<h2>使用</h2>
			<p>
				<ol>
					<li>
						下载对应 npm 包。
						<pre><code class="shell">
$ npm install --save-dev 插件名
						</code></pre>
					</li>
					<li>
						在 webpack 配置文件进行配置
						<pre><code class="javascript">
var 插件构造函数 = require('插件名');
module.exports = {
	plugins: [
		new 插件构造函数({
			// 插件参数
		})
	]
}
						</code></pre>
					</li>
				</ol>
			</p>
		</section>
		<section>
			<h2>html-webpack-plugin</h2>
			<p>
				当使用 webpack 打包工具对 javascript 等文件进行打包时，其输出名可能经常进行变更（例如使用hash），手动修改 index.html （假设为入口文件）十分繁琐，此时就需要<span class="definition"> html-webpack-plugin </span>插件来动态生成入口文件（ HTML5 ）。
				<pre><code class="shell">
$ npm install --save-dev html-webpack-plugin
				</code></pre>
				配置 webpack.conf.js
				<pre><code class="javascript">
var HtmlWebpackPlugin = require('html-webpack-plugin');
module.exports = {
	output: {
		filename: 'bundle.js',
		path: path.resolve(__dirname, 'dist')
	},
	plugins: [
		new HtmlWebpackPlugin({
			meta: {author: 'me'}, // 添加 &lt;meta name="author" content="me"&gt; 标签
			title: 'home', //  添加 &lt;title&gt;home&lt;/title&gt; 标签
			filename: 'index.html', // 生成的文件名，默认为 index.html
			favicon: './src/asserts/img/favicon.ico', // 从 webpack 配置文件开始寻找 icon 文件并复制到 index.html 同级路径下
			hash: true, // 开启后在该文档 script 和 link 进行 url 请求后自动追加 ?[hash:20]
			minify: {}, // 传入 html-minifier 选项来控制压缩
			cache: true, // 使用缓存，表示修改文件后才会 emit
			showErrors: true, // 开启后如果编译错误，错误消息将写进 html 页面
			template: './src/index.html', // 使用模版，从 webpack 配置文件开始寻找模版
			templateParameters: {}, // 向模版传入的参数
			inject: 'body' // script 标签放在 body 尾部（ true | 'body' | 'head' | false ）
		})
	]
}
				</code></pre>
				（模版文件<span class="definition"> ./src/index.html </span>内容只有在 body 内的<span class="definition"> hello world </span>）<br>
				最终生成的 html 文件<span class="definition"> ./dist/index.html </span>自动使用<span class="definition"> &lt;script&gt;</span>标签来引入 webpack 打包的输出文件。
				<pre><code class="html">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;meta name="author" content="me"&gt;
	&lt;title&gt;home&lt;/title&gt;
&lt;link rel="shortcut icon" href="favicon.ico"&gt;&lt;/head&gt;
&lt;body&gt;
	hello world
	&lt;script type="text/javascript" src="bundle.js?87dbe529ad9135f91934"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
				</code></pre>
				<div class="tip">
					如果需要使用该插件生成多个 html 页面，则向 plugins 数组传入多个 html-webpack-plugin 插件实例
				</div>
			</p>
		</section>
		<section class="refer">
			<h2>参考文献</h2>
			<p>
				<div>[1] 插件(plugins) <a href="https://webpack.docschina.org/concepts/plugins/">https://webpack.docschina.org/concepts/plugins/</a></div>
				<div>[2] html-webpack-plugin <a href="https://github.com/jantimon/html-webpack-plugin">https://github.com/jantimon/html-webpack-plugin</a></div>
			</p>
		</section>
	</article>
</body>
</html>