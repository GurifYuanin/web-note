<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Vue 安装</title>
  <link rel="stylesheet" href="../../css/normalize.css">
  <link rel="stylesheet" href="../../css/styles/agate.css">
  <link rel="stylesheet" href="../../css/dark.css">
  
  <script src="../../js/highlight.pack.js"></script>
  <script src="../../js/index.min.js"></script>
</head>

<body>
  <aside id="sidebar">
    <section id="catalog">
      <img id="hideCatalog" src="../../images/catalog.png" alt="加载失败">
      目录
    </section>
  </aside>
  <div id="showCatalog">
    <img src="../../images/arrow.png">
  </div>
  <article id="container">
    <hgroup>
      <h1 id="title">安装</h1>
    </hgroup>
    <section>
      <h2>&lt;script&gt;</h2>
      <p>
        直接下载<a download href="https://vuejs.org/js/vue.js"> vue </a>文件后引入。
        <pre><code class="html">
&lt;script src="vue.js"&gt;&lt;/script&gt;
				</code></pre>
      </p>
    </section>
    <section>
      <h2>CLI</h2>
      <p>
        使用官方提供的命令行工具（此处使用 npm 来安装 CLI）
        <pre><code class="shell">
# 全局安装 vue-cli
$ npm install --global vue-cli
# 创建一个基于 webpack 模板的新项目
$ vue init webpack 项目名
# 进入项目
$ cd 项目名
# 安装依赖模块
$ npm install
# 运行
$ npm run dev
				</code></pre>
        生成的项目结构为：
        <div id="catalogFrame">
          <img src="../../images/dir.png">build：项目构建目录<br>
          <img src="../../images/dir.png">config：配置目录<br>
          <div>
            <img src="../../images/javascript.png">dev.en.js：开发环境配置<br>
            <img src="../../images/javascript.png">prod.env.js：生产环境配置<br>
            <img src="../../images/javascript.png">test.env.js：测试环境配置<br>
            <img src="../../images/javascript.png">index.js：项目配置<br>
          </div>
          <img src="../../images/dir.png">node_modules：npm 模块<br>
          <img src="../../images/dir.png">src<br>
          <div>
            <img src="../../images/dir.png">assets：图片目录<br>
            <img src="../../images/dir.png">components：公共组件目录<br>
            <img src="../../images/dir.png">router：路由目录<br>
            <img src="../../images/vuejs.png">App.vue：页面入口文件<br>
            <img src="../../images/javascript.png">main.js：程序入口文件<br>
          </div>
          <img src="../../images/dir.png">static：静态资源<br>
          <img src="../../images/dir.png">test：测试目录<br>
          <img src="../../images/html.png">index.html：程序入口文件<br>
          <img src="../../images/json.png">package.json：项目配置文件<br>
          <img src="../../images/read.png">README.md：说明文档<br>
        </div>
        <span class="definition"> npm run dev </span>实际上是执行<span class="definition"> 项目名/package.json </span>的：
        <pre><code class="json">
"scripts": {
  "dev": "webpack-dev-server --inline --progress --config build/webpack.dev.conf.js"
}
				</code></pre>
        可以在<span class="definition"> config/index.js </span>对启动参数进行配置
        <pre><code class="javascript">
dev: {
  // Paths
  assetsSubDirectory: 'static',
  assetsPublicPath: '/',
  proxyTable: {},

  // Various Dev Server settings
  host: 'localhost', // can be overwritten by process.env.HOST
  port: 8080, // can be overwritten by process.env.PORT, if port is in use, a free one will be determined
  autoOpenBrowser: false,
  errorOverlay: true,
  notifyOnErrors: true,
  poll: false, // https://webpack.js.org/configuration/dev-server/#devserver-watchoptions-
}
				</code></pre>
        默认使用 8080 端口，此时因为我的 8080 端口已被占用，vue 自动检查到并使用了 8081 端口。
        <figure>
          <img src="../../images/vue_run_dev.jpg">
          <figcaption>npm run dev</figcaption>
        </figure>
        <figure>
          <img src="../../images/vue_index.jpg">
          <figcaption>访问 localhost:8081 </figcaption>
        </figure>
        以上页面访问的是项目根目录下的<span class="definition"> index.html </span>
        <pre><code class="html">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0"&gt;
    &lt;title&gt;vue-demo&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    <span class="strong">&lt;div id="app"&gt;&lt;/div&gt;</span>
    &lt;!-- built files will be auto injected --&gt;
  &lt;/body&gt;
&lt;/html&gt;
				</code></pre>
        页面上的内容实际上是<span class="definition"> &lt;div id="app"&gt;&lt;/div&gt; </span>产生的，因为<span class="definition">
          index.html </span>引入了<span class="definition"> src/main.js </span>，创建了一个 vue 实例
        <pre><code class="javascript">
import Vue from 'vue'
import App from './App'
import router from './router'

Vue.config.productionTip = false

/* eslint-disable no-new */
new Vue({
  el: '#app',
  router,
  render: h => h(App)
})
				</code></pre>
        经过 router（路由）转到模版<span class="definition"> src/components/HelloWorld.vue </span>
        <pre><code id="pageCode" class="html" style="max-height: 200px; overflow: hidden;">
&lt;template&gt;
  &lt;div class="hello"&gt;
    &lt;h1&gt;{{ msg }}&lt;/h1&gt;
    &lt;h2&gt;Essential Links&lt;/h2&gt;
    &lt;ul&gt;
      &lt;li&gt;
        &lt;a
          href="https://vuejs.org"
          target="_blank"
        &gt;
          Core Docs
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a
          href="https://forum.vuejs.org"
          target="_blank"
        &gt;
          Forum
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a
          href="https://chat.vuejs.org"
          target="_blank"
        &gt;
          Community Chat
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a
          href="https://twitter.com/vuejs"
          target="_blank"
        &gt;
          Twitter
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;br&gt;
      &lt;li&gt;
        &lt;a
          href="http://vuejs-templates.github.io/webpack/"
          target="_blank"
        &gt;
          Docs for This Template
        &lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
    &lt;h2&gt;Ecosystem&lt;/h2&gt;
    &lt;ul&gt;
      &lt;li&gt;
        &lt;a
          href="http://router.vuejs.org/"
          target="_blank"
        &gt;
          vue-router
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a
          href="http://vuex.vuejs.org/"
          target="_blank"
        &gt;
          vuex
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a
          href="http://vue-loader.vuejs.org/"
          target="_blank"
        &gt;
          vue-loader
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a
          href="https://github.com/vuejs/awesome-vue"
          target="_blank"
        &gt;
          awesome-vue
        &lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'HelloWorld',
  data () {
    return {
      msg: 'Welcome to Your Vue.js App'
    }
  }
}
&lt;/script&gt;
&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;
h1, h2 {
  font-weight: normal;
}
ul {
  list-style-type: none;
  padding: 0;
}
li {
  display: inline-block;
  margin: 0 10px;
}
a {
  color: #42b983;
}
&lt;/style&gt;
				</code></pre>
        <div id="pageCodeToShow" style="text-align: center; cursor: pointer; opacity: .5;" click>后略 ↓</div>
        <script>
          (function () {
            document.getElementById('pageCodeToShow').onclick = function () {
              document.getElementById('pageCode').style.maxHeight = '';
              this.style.display = 'none';
            }
          })();
        </script>
      </p>
    </section>
    <section>
      <h2>不同版本比较</h2>
      <p>
        使用<span class="different"> npm i vue --save </span>下载获得的 vue 项目的 dist/ 目录下有多个版本：
        <figure>
          <img src="../../images/vue_install_dist.jpg">
        </figure>
        根据 vue/package.json 的配置项，main 为 dist/vue.runtime.common.js，也就是说如果执行以下代码导入得的是 dist/vue.runtime.common.js 文件。
        <pre><code class="javascript">
import Vue from 'vue';
            </code></pre>
        <h3>runtime & compiler</h3>
        <p>
          <ul>
            <li>compiler：可以将 Vue 选项的 template 属性编译为 render 函数</li>
            <li>runtime：除去 compiler 的 vue 代码</li>
          </ul>
          文件名如果带有 runtime，那么说明其文件删除了 runtime 代码，因此如果你通过 npm 下载 vue 后使用：
          <pre><code class="javascript">
new Vue({
    el: '#app',
    template: '&lt;h1>Hello world&lt;h1>'
});
                </code></pre>
          会直接报错：
          <figure>
            <img src="../../images/vue_error.jpg">
          </figure>
          如果是使用 vue-cli 进行构建，可以在<span class="definition"> build/webpack.dev.conf.js </span>给 'vue' 起个别名，别名是 vue/dist
          下不包含 runtime 的文件，在<span class="definition"> const devWebpackConfig = merge(baseWebpackConfig, { </span>之后追加
          <pre><code class="javascript">
resolve: {
        alias: {
            'vue$': 'vue/dist/vue.esm.js'
        }
    },
                </code></pre>
          重启项目，然后就可以愉快地使用了
          <pre><code class="shell">
$ npm run dev
                </code></pre>
          也可以使用 vue-loader 来对 .vue 文件进行编译，打包时 template 会被预编译进打包文件。
        </p>
      </p>
    </section>
    <section class="refer">
      <h2>参考文献</h2>
      <p>
        <div>[1] Vue.js <a href="https://cn.vuejs.org/v2/guide/">https://cn.vuejs.org/v2/guide/</a></div>
        <div>[2] DiscipleD Vue 2.0 升（cai）级（keng）之旅<a
            href="https://segmentfault.com/a/1190000006435886">https://segmentfault.com/a/1190000006435886</a></div>
      </p>
    </section>
  </article>
</body>

</html>